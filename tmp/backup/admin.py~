from django.contrib import admin

from newsletter.models import (Newsletter, NewsletterOption, NewsletterOptionPair, NewsletterSubscription,
    NewsletterSubmission)


class NewsletterOptionPairInline(admin.TabularInline):
    """The inline consisting of the option, value pairs associated to the newsletter model."""
    model = NewsletterOptionPair
    
class NewsletterAdmin(admin.ModelAdmin):
    """Admin for the newsletters."""
    list_display = ('name', 'status')
    search_fields = ('name',)
    list_filter = ('status',)
    inlines = [NewsletterOptionPairInline]

class NewsletterOptionAdmin(admin.ModelAdmin):
    """The admin class for the newsletter options."""
    search_fields = ('name',)

class NewsletterOptionPairAdmin(admin.ModelAdmin):
    """The admin class for the newsletter option pairs"""
    list_display = ('option', 'value', 'newsletter')
    search_fields = ('option',)

class NewsletterSubscriptionAdmin(admin.ModelAdmin):
    """The admin class for the user newsletter subscriptions."""
    list_display = ('newsletter', 'user', 'status')
    search_fields = ('newsletter', 'user')
    list_filter = ('status',)
    date_hierarchy = 'creation_date'
    
class NewsletterSubmissionAdmin(admin.ModelAdmin):
    """The admin class for the newsletter submission to the external newsletter application."""
    list_display = ('newsletter', 'user', 'submission_date', 'successful_transmission')
    search_fields = ('newsletter', 'user')
    list_filter = ('successful_transmission',)
    date_hierarchy = 'submission_date'


admin.site.register(Newsletter, NewsletterAdmin)
admin.site.register(NewsletterOption, NewsletterOptionAdmin)
admin.site.register(NewsletterOptionPair, NewsletterOptionPairAdmin)
admin.site.register(NewsletterSubscription, NewsletterSubscriptionAdmin)
admin.site.register(NewsletterSubmission, NewsletterSubmissionAdmin)
